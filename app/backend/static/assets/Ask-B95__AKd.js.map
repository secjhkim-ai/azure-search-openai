{"version":3,"file":"Ask-B95__AKd.js","sources":["../../../frontend/src/pages/ask/Ask.tsx"],"sourcesContent":["import { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { Panel, DefaultButton, Spinner } from \"@fluentui/react\";\r\n\r\nimport styles from \"./Ask.module.css\";\r\n\r\nimport { askApi, configApi, ChatAppResponse, ChatAppRequest, RetrievalMode, VectorFields, GPT4VInput, SpeechConfig } from \"../../api\";\r\nimport { Answer, AnswerError } from \"../../components/Answer\";\r\nimport { QuestionInput } from \"../../components/QuestionInput\";\r\nimport { ExampleList } from \"../../components/Example\";\r\nimport { AnalysisPanel, AnalysisPanelTabs } from \"../../components/AnalysisPanel\";\r\nimport { SettingsButton } from \"../../components/SettingsButton/SettingsButton\";\r\nimport { useLogin, getToken, requireAccessControl } from \"../../authConfig\";\r\nimport { UploadFile } from \"../../components/UploadFile\";\r\nimport { Settings } from \"../../components/Settings/Settings\";\r\nimport { useMsal } from \"@azure/msal-react\";\r\nimport { TokenClaimsDisplay } from \"../../components/TokenClaimsDisplay\";\r\nimport { LoginContext } from \"../../loginContext\";\r\nimport { LanguagePicker } from \"../../i18n/LanguagePicker\";\r\n\r\nexport function Component(): JSX.Element {\r\n    const [isConfigPanelOpen, setIsConfigPanelOpen] = useState(false);\r\n    const [promptTemplate, setPromptTemplate] = useState<string>(\"\");\r\n    const [promptTemplatePrefix, setPromptTemplatePrefix] = useState<string>(\"\");\r\n    const [promptTemplateSuffix, setPromptTemplateSuffix] = useState<string>(\"\");\r\n    const [temperature, setTemperature] = useState<number>(0.3);\r\n    const [seed, setSeed] = useState<number | null>(null);\r\n    const [minimumRerankerScore, setMinimumRerankerScore] = useState<number>(0);\r\n    const [minimumSearchScore, setMinimumSearchScore] = useState<number>(0);\r\n    const [retrievalMode, setRetrievalMode] = useState<RetrievalMode>(RetrievalMode.Hybrid);\r\n    const [retrieveCount, setRetrieveCount] = useState<number>(3);\r\n    const [maxSubqueryCount, setMaxSubqueryCount] = useState<number>(10);\r\n    const [resultsMergeStrategy, setResultsMergeStrategy] = useState<string>(\"interleaved\");\r\n    const [useSemanticRanker, setUseSemanticRanker] = useState<boolean>(true);\r\n    const [useSemanticCaptions, setUseSemanticCaptions] = useState<boolean>(false);\r\n    const [useQueryRewriting, setUseQueryRewriting] = useState<boolean>(false);\r\n    const [reasoningEffort, setReasoningEffort] = useState<string>(\"\");\r\n    const [useGPT4V, setUseGPT4V] = useState<boolean>(false);\r\n    const [gpt4vInput, setGPT4VInput] = useState<GPT4VInput>(GPT4VInput.TextAndImages);\r\n    const [includeCategory, setIncludeCategory] = useState<string>(\"\");\r\n    const [excludeCategory, setExcludeCategory] = useState<string>(\"\");\r\n    const [question, setQuestion] = useState<string>(\"\");\r\n    const [vectorFields, setVectorFields] = useState<VectorFields>(VectorFields.TextAndImageEmbeddings);\r\n    const [useOidSecurityFilter, setUseOidSecurityFilter] = useState<boolean>(false);\r\n    const [useGroupsSecurityFilter, setUseGroupsSecurityFilter] = useState<boolean>(false);\r\n    const [showGPT4VOptions, setShowGPT4VOptions] = useState<boolean>(false);\r\n    const [showSemanticRankerOption, setShowSemanticRankerOption] = useState<boolean>(false);\r\n    const [showQueryRewritingOption, setShowQueryRewritingOption] = useState<boolean>(false);\r\n    const [showReasoningEffortOption, setShowReasoningEffortOption] = useState<boolean>(false);\r\n    const [showVectorOption, setShowVectorOption] = useState<boolean>(false);\r\n    const [showUserUpload, setShowUserUpload] = useState<boolean>(false);\r\n    const [showLanguagePicker, setshowLanguagePicker] = useState<boolean>(false);\r\n    const [showSpeechInput, setShowSpeechInput] = useState<boolean>(false);\r\n    const [showSpeechOutputBrowser, setShowSpeechOutputBrowser] = useState<boolean>(false);\r\n    const [showSpeechOutputAzure, setShowSpeechOutputAzure] = useState<boolean>(false);\r\n    const audio = useRef(new Audio()).current;\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [showAgenticRetrievalOption, setShowAgenticRetrievalOption] = useState<boolean>(false);\r\n    const [useAgenticRetrieval, setUseAgenticRetrieval] = useState<boolean>(false);\r\n\r\n    const lastQuestionRef = useRef<string>(\"\");\r\n\r\n    const [isLoading, setIsLoading] = useState<boolean>(false);\r\n    const [error, setError] = useState<unknown>();\r\n    const [answer, setAnswer] = useState<ChatAppResponse>();\r\n    // For the Ask tab, this array will hold a maximum of one URL\r\n    const [speechUrls, setSpeechUrls] = useState<(string | null)[]>([]);\r\n\r\n    const speechConfig: SpeechConfig = {\r\n        speechUrls,\r\n        setSpeechUrls,\r\n        audio,\r\n        isPlaying,\r\n        setIsPlaying\r\n    };\r\n\r\n    const [activeCitation, setActiveCitation] = useState<string>();\r\n    const [activeAnalysisPanelTab, setActiveAnalysisPanelTab] = useState<AnalysisPanelTabs | undefined>(undefined);\r\n\r\n    const client = useLogin ? useMsal().instance : undefined;\r\n    const { loggedIn } = useContext(LoginContext);\r\n\r\n    const getConfig = async () => {\r\n        configApi().then(config => {\r\n            setShowGPT4VOptions(config.showGPT4VOptions);\r\n            setUseSemanticRanker(config.showSemanticRankerOption);\r\n            setShowSemanticRankerOption(config.showSemanticRankerOption);\r\n            setUseQueryRewriting(config.showQueryRewritingOption);\r\n            setShowQueryRewritingOption(config.showQueryRewritingOption);\r\n            setShowReasoningEffortOption(config.showReasoningEffortOption);\r\n            if (config.showReasoningEffortOption) {\r\n                setReasoningEffort(config.defaultReasoningEffort);\r\n            }\r\n            setShowVectorOption(config.showVectorOption);\r\n            if (!config.showVectorOption) {\r\n                setRetrievalMode(RetrievalMode.Text);\r\n            }\r\n            setShowUserUpload(config.showUserUpload);\r\n            setshowLanguagePicker(config.showLanguagePicker);\r\n            setShowSpeechInput(config.showSpeechInput);\r\n            setShowSpeechOutputBrowser(config.showSpeechOutputBrowser);\r\n            setShowSpeechOutputAzure(config.showSpeechOutputAzure);\r\n            setShowAgenticRetrievalOption(config.showAgenticRetrievalOption);\r\n            setUseAgenticRetrieval(config.showAgenticRetrievalOption);\r\n            if (config.showAgenticRetrievalOption) {\r\n                setRetrieveCount(10);\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        getConfig();\r\n    }, []);\r\n\r\n    const makeApiRequest = async (question: string) => {\r\n        lastQuestionRef.current = question;\r\n\r\n        error && setError(undefined);\r\n        setIsLoading(true);\r\n        setActiveCitation(undefined);\r\n        setActiveAnalysisPanelTab(undefined);\r\n\r\n        const token = client ? await getToken(client) : undefined;\r\n\r\n        try {\r\n            const request: ChatAppRequest = {\r\n                messages: [\r\n                    {\r\n                        content: question,\r\n                        role: \"user\"\r\n                    }\r\n                ],\r\n                context: {\r\n                    overrides: {\r\n                        prompt_template: promptTemplate.length === 0 ? undefined : promptTemplate,\r\n                        prompt_template_prefix: promptTemplatePrefix.length === 0 ? undefined : promptTemplatePrefix,\r\n                        prompt_template_suffix: promptTemplateSuffix.length === 0 ? undefined : promptTemplateSuffix,\r\n                        include_category: includeCategory.length === 0 ? undefined : includeCategory,\r\n                        exclude_category: excludeCategory.length === 0 ? undefined : excludeCategory,\r\n                        top: retrieveCount,\r\n                        max_subqueries: maxSubqueryCount,\r\n                        results_merge_strategy: resultsMergeStrategy,\r\n                        temperature: temperature,\r\n                        minimum_reranker_score: minimumRerankerScore,\r\n                        minimum_search_score: minimumSearchScore,\r\n                        retrieval_mode: retrievalMode,\r\n                        semantic_ranker: useSemanticRanker,\r\n                        semantic_captions: useSemanticCaptions,\r\n                        query_rewriting: useQueryRewriting,\r\n                        reasoning_effort: reasoningEffort,\r\n                        use_oid_security_filter: useOidSecurityFilter,\r\n                        use_groups_security_filter: useGroupsSecurityFilter,\r\n                        vector_fields: vectorFields,\r\n                        use_gpt4v: useGPT4V,\r\n                        gpt4v_input: gpt4vInput,\r\n                        language: i18n.language,\r\n                        use_agentic_retrieval: useAgenticRetrieval,\r\n                        ...(seed !== null ? { seed: seed } : {})\r\n                    }\r\n                },\r\n                // AI Chat Protocol: Client must pass on any session state received from the server\r\n                session_state: answer ? answer.session_state : null\r\n            };\r\n            const result = await askApi(request, token);\r\n            setAnswer(result);\r\n            setSpeechUrls([null]);\r\n        } catch (e) {\r\n            setError(e);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSettingsChange = (field: string, value: any) => {\r\n        switch (field) {\r\n            case \"promptTemplate\":\r\n                setPromptTemplate(value);\r\n                break;\r\n            case \"promptTemplatePrefix\":\r\n                setPromptTemplatePrefix(value);\r\n                break;\r\n            case \"promptTemplateSuffix\":\r\n                setPromptTemplateSuffix(value);\r\n                break;\r\n            case \"temperature\":\r\n                setTemperature(value);\r\n                break;\r\n            case \"seed\":\r\n                setSeed(value);\r\n                break;\r\n            case \"minimumRerankerScore\":\r\n                setMinimumRerankerScore(value);\r\n                break;\r\n            case \"minimumSearchScore\":\r\n                setMinimumSearchScore(value);\r\n                break;\r\n            case \"retrieveCount\":\r\n                setRetrieveCount(value);\r\n                break;\r\n            case \"maxSubqueryCount\":\r\n                setMaxSubqueryCount(value);\r\n                break;\r\n            case \"resultsMergeStrategy\":\r\n                setResultsMergeStrategy(value);\r\n                break;\r\n            case \"useSemanticRanker\":\r\n                setUseSemanticRanker(value);\r\n                break;\r\n            case \"useSemanticCaptions\":\r\n                setUseSemanticCaptions(value);\r\n                break;\r\n            case \"useQueryRewriting\":\r\n                setUseQueryRewriting(value);\r\n                break;\r\n            case \"reasoningEffort\":\r\n                setReasoningEffort(value);\r\n                break;\r\n            case \"excludeCategory\":\r\n                setExcludeCategory(value);\r\n                break;\r\n            case \"includeCategory\":\r\n                setIncludeCategory(value);\r\n                break;\r\n            case \"useOidSecurityFilter\":\r\n                setUseOidSecurityFilter(value);\r\n                break;\r\n            case \"useGroupsSecurityFilter\":\r\n                setUseGroupsSecurityFilter(value);\r\n                break;\r\n            case \"useGPT4V\":\r\n                setUseGPT4V(value);\r\n                break;\r\n            case \"gpt4vInput\":\r\n                setGPT4VInput(value);\r\n                break;\r\n            case \"vectorFields\":\r\n                setVectorFields(value);\r\n                break;\r\n            case \"retrievalMode\":\r\n                setRetrievalMode(value);\r\n                break;\r\n            case \"useAgenticRetrieval\":\r\n                setUseAgenticRetrieval(value);\r\n        }\r\n    };\r\n\r\n    const onExampleClicked = (example: string) => {\r\n        makeApiRequest(example);\r\n        setQuestion(example);\r\n    };\r\n\r\n    const onShowCitation = (citation: string) => {\r\n        if (activeCitation === citation && activeAnalysisPanelTab === AnalysisPanelTabs.CitationTab) {\r\n            setActiveAnalysisPanelTab(undefined);\r\n        } else {\r\n            setActiveCitation(citation);\r\n            setActiveAnalysisPanelTab(AnalysisPanelTabs.CitationTab);\r\n        }\r\n    };\r\n\r\n    const onToggleTab = (tab: AnalysisPanelTabs) => {\r\n        if (activeAnalysisPanelTab === tab) {\r\n            setActiveAnalysisPanelTab(undefined);\r\n        } else {\r\n            setActiveAnalysisPanelTab(tab);\r\n        }\r\n    };\r\n\r\n    const onUseOidSecurityFilterChange = (_ev?: React.FormEvent<HTMLElement | HTMLInputElement>, checked?: boolean) => {\r\n        setUseOidSecurityFilter(!!checked);\r\n    };\r\n\r\n    const onUseGroupsSecurityFilterChange = (_ev?: React.FormEvent<HTMLElement | HTMLInputElement>, checked?: boolean) => {\r\n        setUseGroupsSecurityFilter(!!checked);\r\n    };\r\n\r\n    const { t, i18n } = useTranslation();\r\n\r\n    return (\r\n        <div className={styles.askContainer}>\r\n            {/* Setting the page title using react-helmet-async */}\r\n            <Helmet>\r\n                <title>{t(\"pageTitle\")}</title>\r\n            </Helmet>\r\n            <div className={styles.askTopSection}>\r\n                <div className={styles.commandsContainer}>\r\n                    {showUserUpload && <UploadFile className={styles.commandButton} disabled={!loggedIn} />}\r\n                    <SettingsButton className={styles.commandButton} onClick={() => setIsConfigPanelOpen(!isConfigPanelOpen)} />\r\n                </div>\r\n                <h1 className={styles.askTitle}>{t(\"askTitle\")}</h1>\r\n                <div className={styles.askQuestionInput}>\r\n                    <QuestionInput\r\n                        placeholder={t(\"gpt4vExamples.placeholder\")}\r\n                        disabled={isLoading}\r\n                        initQuestion={question}\r\n                        onSend={question => makeApiRequest(question)}\r\n                        showSpeechInput={showSpeechInput}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className={styles.askBottomSection}>\r\n                {isLoading && <Spinner label={t(\"generatingAnswer\")} />}\r\n                {!lastQuestionRef.current && (\r\n                    <div className={styles.askTopSection}>\r\n                        {showLanguagePicker && <LanguagePicker onLanguageChange={newLang => i18n.changeLanguage(newLang)} />}\r\n                        <ExampleList onExampleClicked={onExampleClicked} useGPT4V={useGPT4V} />\r\n                    </div>\r\n                )}\r\n                {!isLoading && answer && !error && (\r\n                    <div className={styles.askAnswerContainer}>\r\n                        <Answer\r\n                            answer={answer}\r\n                            index={0}\r\n                            speechConfig={speechConfig}\r\n                            isStreaming={false}\r\n                            onCitationClicked={x => onShowCitation(x)}\r\n                            onThoughtProcessClicked={() => onToggleTab(AnalysisPanelTabs.ThoughtProcessTab)}\r\n                            onSupportingContentClicked={() => onToggleTab(AnalysisPanelTabs.SupportingContentTab)}\r\n                            showSpeechOutputAzure={showSpeechOutputAzure}\r\n                            showSpeechOutputBrowser={showSpeechOutputBrowser}\r\n                        />\r\n                    </div>\r\n                )}\r\n                {error ? (\r\n                    <div className={styles.askAnswerContainer}>\r\n                        <AnswerError error={error.toString()} onRetry={() => makeApiRequest(lastQuestionRef.current)} />\r\n                    </div>\r\n                ) : null}\r\n                {activeAnalysisPanelTab && answer && (\r\n                    <AnalysisPanel\r\n                        className={styles.askAnalysisPanel}\r\n                        activeCitation={activeCitation}\r\n                        onActiveTabChanged={x => onToggleTab(x)}\r\n                        citationHeight=\"600px\"\r\n                        answer={answer}\r\n                        activeTab={activeAnalysisPanelTab}\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n            <Panel\r\n                headerText={t(\"labels.headerText\")}\r\n                isOpen={isConfigPanelOpen}\r\n                isBlocking={false}\r\n                onDismiss={() => setIsConfigPanelOpen(false)}\r\n                closeButtonAriaLabel={t(\"labels.closeButton\")}\r\n                onRenderFooterContent={() => <DefaultButton onClick={() => setIsConfigPanelOpen(false)}>{t(\"labels.closeButton\")}</DefaultButton>}\r\n                isFooterAtBottom={true}\r\n            >\r\n                <Settings\r\n                    promptTemplate={promptTemplate}\r\n                    promptTemplatePrefix={promptTemplatePrefix}\r\n                    promptTemplateSuffix={promptTemplateSuffix}\r\n                    temperature={temperature}\r\n                    retrieveCount={retrieveCount}\r\n                    maxSubqueryCount={maxSubqueryCount}\r\n                    resultsMergeStrategy={resultsMergeStrategy}\r\n                    seed={seed}\r\n                    minimumSearchScore={minimumSearchScore}\r\n                    minimumRerankerScore={minimumRerankerScore}\r\n                    useSemanticRanker={useSemanticRanker}\r\n                    useSemanticCaptions={useSemanticCaptions}\r\n                    useQueryRewriting={useQueryRewriting}\r\n                    reasoningEffort={reasoningEffort}\r\n                    excludeCategory={excludeCategory}\r\n                    includeCategory={includeCategory}\r\n                    retrievalMode={retrievalMode}\r\n                    useGPT4V={useGPT4V}\r\n                    gpt4vInput={gpt4vInput}\r\n                    vectorFields={vectorFields}\r\n                    showSemanticRankerOption={showSemanticRankerOption}\r\n                    showQueryRewritingOption={showQueryRewritingOption}\r\n                    showReasoningEffortOption={showReasoningEffortOption}\r\n                    showGPT4VOptions={showGPT4VOptions}\r\n                    showVectorOption={showVectorOption}\r\n                    useOidSecurityFilter={useOidSecurityFilter}\r\n                    useGroupsSecurityFilter={useGroupsSecurityFilter}\r\n                    useLogin={!!useLogin}\r\n                    loggedIn={loggedIn}\r\n                    requireAccessControl={requireAccessControl}\r\n                    showAgenticRetrievalOption={showAgenticRetrievalOption}\r\n                    useAgenticRetrieval={useAgenticRetrieval}\r\n                    onChange={handleSettingsChange}\r\n                />\r\n                {useLogin && <TokenClaimsDisplay />}\r\n            </Panel>\r\n        </div>\r\n    );\r\n}\r\n\r\nComponent.displayName = \"Ask\";\r\n"],"names":["Component","isConfigPanelOpen","setIsConfigPanelOpen","useState","promptTemplate","setPromptTemplate","promptTemplatePrefix","setPromptTemplatePrefix","promptTemplateSuffix","setPromptTemplateSuffix","temperature","setTemperature","seed","setSeed","minimumRerankerScore","setMinimumRerankerScore","minimumSearchScore","setMinimumSearchScore","retrievalMode","setRetrievalMode","RetrievalMode","retrieveCount","setRetrieveCount","maxSubqueryCount","setMaxSubqueryCount","resultsMergeStrategy","setResultsMergeStrategy","useSemanticRanker","setUseSemanticRanker","useSemanticCaptions","setUseSemanticCaptions","useQueryRewriting","setUseQueryRewriting","reasoningEffort","setReasoningEffort","useGPT4V","setUseGPT4V","gpt4vInput","setGPT4VInput","GPT4VInput","includeCategory","setIncludeCategory","excludeCategory","setExcludeCategory","question","setQuestion","vectorFields","setVectorFields","VectorFields","useOidSecurityFilter","setUseOidSecurityFilter","useGroupsSecurityFilter","setUseGroupsSecurityFilter","showGPT4VOptions","setShowGPT4VOptions","showSemanticRankerOption","setShowSemanticRankerOption","showQueryRewritingOption","setShowQueryRewritingOption","showReasoningEffortOption","setShowReasoningEffortOption","showVectorOption","setShowVectorOption","showUserUpload","setShowUserUpload","showLanguagePicker","setshowLanguagePicker","showSpeechInput","setShowSpeechInput","showSpeechOutputBrowser","setShowSpeechOutputBrowser","showSpeechOutputAzure","setShowSpeechOutputAzure","audio","useRef","isPlaying","setIsPlaying","showAgenticRetrievalOption","setShowAgenticRetrievalOption","useAgenticRetrieval","setUseAgenticRetrieval","lastQuestionRef","isLoading","setIsLoading","error","setError","answer","setAnswer","speechUrls","setSpeechUrls","speechConfig","activeCitation","setActiveCitation","activeAnalysisPanelTab","setActiveAnalysisPanelTab","client","useLogin","useMsal","loggedIn","useContext","LoginContext","getConfig","configApi","config","useEffect","makeApiRequest","token","getToken","request","i18n","result","askApi","e","handleSettingsChange","field","value","onExampleClicked","example","onShowCitation","citation","AnalysisPanelTabs","onToggleTab","tab","t","useTranslation","jsxs","styles","jsx","Helmet","UploadFile","SettingsButton","QuestionInput","Spinner","LanguagePicker","newLang","ExampleList","Answer","x","AnswerError","AnalysisPanel","Panel","DefaultButton","Settings","requireAccessControl","TokenClaimsDisplay"],"mappings":"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"}